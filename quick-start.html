<!DOCTYPE html>
<html lang="en">

<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
<title>Quick Start | Pubfood</title>

<!-- Bootstrap -->
<link href="bootstrap/css/bootstrap.min.css" rel="stylesheet">
<link type="text/css" href="styles.css" rel="stylesheet" />
<style>
.content ul ul {
  list-style: none;
}
#section-ip-2 li {
  background-image: none;
  margin: 0;
}
#div-rail {
  font-family: monospace;
}
#div-rail h3 {
  font-size: 15px;
  font-weight: bold;
}
#div-rail h4 {
  font-size: 13px;
  font-weight: bold;
}
#div-rail p {
  margin: 0;
}
</style>

<!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
<!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->

<script src="https://use.typekit.net/kjp6xol.js"></script>
<script>try{Typekit.load({ async: true });}catch(e){}</script>
</head>

<body>

<!-- begin header -->
<div class="top-wrapper-outer">
<div id="top-wrapper">

<div class="top-w-1">
<div id="logo"><a href="./"><img src="images/logo.png" width="162" height="142" title="Pubfood" alt="Pubfood logo" /></a></div>
</div><!-- end .top-w-1 -->

<div class="top-w-2">
<div id="main-nav">
<ul>
  <li><a href="/quick-start">Quick Start</a></li>
  <li><a href="/integration-playbook">Integration Playbook</a></li>
  <li><a href="/api-reference">API Reference</a></li>
  <li><a href="https://github.com/pubfood/pubfood" target="_blank">GitHub</a></li>
  <li><a href="https://pubfood.slack.com" target="_blank">Slack</a></li>
</ul>
</div><!-- end #main-nav -->
</div><!-- end .top-w-2 -->

<div class="clear-float"></div>

<div id="mn-toggle-link"><a href="javascript:void(0)" title="show main navigation"></a></div>

</div><!-- end #top-wrapper -->
</div><!-- end .top-wrapper-outer -->
<!-- end header -->

<div id="section-ip-1" class="content">
<!-- begin section connector :: needed to complete header -->
<div class="section-connector-1"><img src="images/half-circle-1.png" width="120" height="35" alt="half circle" /></div>
<!-- end section connector :: needed to complete header -->
<div class="container-fluid">
<div class="row">
<div class="col-xs-12">
</div>
</div><!-- end .row -->
</div><!-- end .container-fluid -->
</div><!-- end #section-ip-1 -->

<div id="section-ip-2" class="content">
<div class="container-fluid">
<div class="row">
<div class="col-xs-12">
  <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autorun=false&amp;skin=sons-of-obsidian"></script>
  <script>
    var insertStepScript = function(name, content) {
      var el = document.getElementById(name);
      if (el) {
        var js = document.createElement('script');
        js.innerHTML = content;
        el.parentNode.insertBefore(js, el);
      }
    };

    var insertStepDoc = function(name, content) {
      var el = document.getElementById(name + '-code');
      if (el) {
        el.innerHTML = content;
      }
    };

    var stepsRequested = 0;
    var stepsReturned = 0;
    var getStep = function(name, doScript) {
      stepsRequested += 1;
      var insertCode = doScript || true;
      var xhr = new XMLHttpRequest();
      xhr.onload = function(e) {
        if (this.status === 200) {
          var blob = new Blob([this.response], {type: 'text/javascript'});
          var reader = new FileReader();
          reader.addEventListener('loadend', function() {
            if (insertCode) {
              insertStepScript(name, reader.result);
            }
            insertStepDoc(name, reader.result);
            stepsReturned += 1;
            if (stepsRequested === stepsReturned) {
              PR.prettyPrint();
            }
          });
          reader.readAsText(blob);
        }
      };
      xhr.open('GET', '/quick-start-' + name + '.js', true);
      xhr.responseType = 'blob';
      xhr.send();
    };

    // global for the auction provider
    window.auctionProviderOne = window.auctionProviderOne || {};
    auctionProviderOne.cmd = auctionProviderOne.cmd || [];

    // globals for all bid providers
    window.bidProviderOne = window.bidProviderOne || {};
    bidProviderOne.cmd = bidProviderOne.cmd || [];
  </script>

  <script src="/pubfood.min.js"></script>

  <h3>Getting started with the Pubfood.js framework</h3>
  <div id="steps">
    <div class="step">
      <h4><em>The steps</em></h4>
      <div class="step-text">
        <ol>
          <li>
            Include the pubfood JavaScript library in your code.
          </li>
          <li>
            <b><span class="code-ref">food.addSlot(...);</span></b>
            <p>Define slots and which partner may bid for them.</p>
          </li>
          <li>
            <b><span class="code-ref">food.addBidProvider(...);</span></b>
            <p>Define or copy your bidding partner JavaScript code.</p>
            <ol>
              <li>on each bid, call the <b><span class="code-ref">pushBid({});</span></b> callback</li>
              <li>when bidding finished, call the <b><span class="code-ref">done();</span></b> callback</li>
            </ol>
            <br>
          </li>
          <li>
            <b><span class="code-ref">food.setAuctionProvider(...);</span></b>
            <p>Define or copy your ad server JavaScript code to send bids to auction.</p>
          </li>
          <li>
            <b><span class="code-ref">food.observe('AUCTION_POST_RUN', ...);</span></b>
            <p>Define where to display your ad.</p>
          </li>
          <li>
            <b><span class="code-ref">food.timeout(...);</span></b><br>
            <b><span class="code-ref">food.start();</span></b>
            <p>Set a bidder timeout and start the pubfood auction.</p>
          </li>
        </ol>
      </div>
      <div id="theAd" class="code-sample">
          <b><em>How did this ad get here?</em></b>
          <pre id="div-rail"></pre>
      </div>
    </div>
    <div class="step">
      <h4>Include the pubfood library in your site code</h4>
      <div class="step-text">To execute the following steps in your own code, you will need to include the pubfood JavaScript library.</div>
      <div class="code-sample">
        <b><a href="https://github.com/pubfood/pubfood/tree/master/dist">https://github.com/pubfood/pubfood/tree/master/dist</a></b>
        <pre id="step0-code" class="prettyprint linenums"></pre>
      </div>
    </div>
    <div class="step">
      <h4>Define slots</h4>
      <div class="step-text">You will tell Pubfood which of your ad server slots are available for bidding and which partners may bid for therm.</div>
      <div class="code-sample">
        <pre id="step1-code" class="prettyprint linenums"></pre>
      </div>
    </div>
    <div class="step">
      <h4>Define bidding partner</h4>
      <div class="step-text">
        Pubfood does not need to know much about how your bid provider works. What it does need to know is:
        <ul>
          <li><span class="lines-ref">line 2</span> - the bidder name</li>
          <li><span class="lines-ref">line 3</span> - the bid provider JavaScript library to load</li>
          <li><span class="lines-ref">line 4</span> - the function to initialize bids</li>
          <li><span class="lines-ref">line 15</span> - submit a bid with the <span class="code-ref">pushBid({});</span> callback</li>
          <li><span class="lines-ref">line 24</span> - notify pubfood with the <span class="code-ref">done();</span> callback</li>
          <li><span class="lines-ref">line 27</span> - the function to refresh bids</li>
        </ul>
      </div>
      <div class="code-sample">
        <pre id="step2-code" class="prettyprint linenums"></pre>
      </div>
    </div>
    <div class="step">
      <h4>Define your ad server</h4>
      <div class="step-text">
        Set your auction provider that will receive bid targeting and send the targeting to auction in your ad server.
        <ul>
          <li><span class="lines-ref">line 2</span> - the auction provider name</li>
          <li><span class="lines-ref">line 3</span> - the auction provider JavaScript library to load</li>
          <li><span class="lines-ref">line 4</span> - the function to initialize the auction</li>
          <li><span class="lines-ref">line 29</span> - notify pubfood with the <span class="code-ref">done();</span> callback</li>
          <li><span class="lines-ref">line 31</span> - the function to refresh with a new auction</li>
        </ul>
      </div>
      <div class="code-sample">
        <pre id="step3-code" class="prettyprint lang-js linenums"></pre>
      </div>
    </div>
    <div class="step">
      <h4>Define when to display ads</h4>
      <div class="step-text">
        When pubfood has completed the auction orchestration, it will raise an event to indicate ads are ready to display.
        <ul>
          <li><span class="lines-ref">line 1</span> - observe the auction provider</li>
          <li><span class="lines-ref">line 3</span> - the auction provider will display the ad</li>
        </ul>
      </div>
      <div class="code-sample">
        <pre id="step4-code" class="prettyprint lang-js linenums"></pre>
      </div>
    </div>
    <div class="step">
      <h4>Start the pubfood auction</h4>
      <div class="step-text">
        Starting a pubfood auction will initiate and orchestrate the steps defined above.
        <ul>
          <li><span class="lines-ref">line 1</span> - bidders need to respond withing this time</li>
          <li><span class="lines-ref">line 2</span> - we can observe all events for debugging</li>
          <li><span class="lines-ref">line 5</span> - finally, start the auction</li>
        </ul>
      </div>
      <div class="code-sample">
        <pre id="step5-code" class="prettyprint lang-js linenums"></pre>
      </div>
    </div>
  </div>
  <p>
    <span style="font-size: larger; font-weight: bold">Very good</span>
    You read through the steps. <a href="#theAd">This is the sample ad rendered by the steps.</a>
  </p>
  <div>
    <div id="step"></div>
    <div id="step1"></div>
    <div id="step2"></div>
    <div id="step3"></div>
    <div id="step4"></div>
    <div id="step5"></div>
  </div>
  <script>
    getStep('step0', false);
    getStep('step1');
    getStep('step2');
    getStep('step3');
    getStep('step4');
    getStep('step5');
  </script>
</div>
</div><!-- end .row -->
</div><!-- end .container-fluid -->
</div><!-- end #section-ip-2 -->

<!-- begin footer -->
<div class="footer-wrapper-outer">
<div id="footer-wrapper">
<div id="footer-logo">
<img class="f-logo-1" src="images/logo.png" width="162" height="142" alt="Pubfood logo" />
<img class="f-logo-2" src="images/logo-2.png" width="100" height="88" alt="Pubfood logo - smaller size" />
</div>
<ul>
<li><a href="https://github.com/pubfood/pubfood" target="_blank">GitHub</a></li>
<!-- <li><a href="#">Contact Us</a></li> -->
<li><a href="https://pubfood.slack.com" target="_blank">Join the Pubfood.js Slack</a></li>
</ul>
<p><span>&copy;2015 PUBFOOD.js</span> <span>ALL RIGHTS RESERVED</span></p>
</div><!-- end #footer-wrapper -->
</div><!-- end .footer-wrapper-outer -->
<!-- end footer -->

<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script type="text/javascript" src="js/scripts.js"></script>

<!-- begin Google Analytics code -->
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-69476533-1', 'pubfood.org');
  ga('send', 'pageview');
</script>
<!-- end Google Analytics code -->

</body>
</html>
